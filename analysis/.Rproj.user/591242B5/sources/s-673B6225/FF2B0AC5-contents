---
title: "Replication archive for 'How to increase COVID-19 vaccination uptake'"
date: "April 2021"
output:
  html_document:
    number_sections: yes
    toc: yes
    toc_float: yes
    toc_depth: 2
    self_contained: yes
    code_folding: hide
  pdf_document:
    toc: yes
  word_document:
    toc: yes
    toc_depth: '2'
keywords: vaccine hesitancy, covid, transaction costs
theme: null
abstract: 
bibliography: references.bib  
editor_options:
  chunk_output_type: console
---

# Housekeeping

## Options

```{r setup, echo=TRUE}
knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE, comment=NA)
options(qwraps2_markup = "markdown")

## Packages
if (!require(pacman)) install.packages("pacman")

pacman::p_load(
  gtrendsR,    # google trends
  aod,         # hypothesis testing (1.3.1)
  car,         # linear hypothesis testing for causal tree (3.0-2)
  corrplot,    # Correlations (0.84)
  DeclareDesign, 
  dplyr,       # Data manipulation (0.8.0.1)
  evtree,      # evolutionary learning of globally optimal trees (1.0-7)
  fastDummies,
  fBasics,     # Summary statistics (3042.89)
  ggplot2,
  grf,         # Generalized random forests (0.10.2)
  haven,       # load sav
  kableExtra,  # Prettier RMarkdown (1.0.1)
  knitr,
  labelled,
  psych,       # Correlation p-values (1.8.12)
  purrr,
  rpart,       # Classification and regression trees, or CART (4.1-13)
  reshape2,
  rpart.plot,  # Plotting trees (3.0.6)
  readr,       # Reading csv files (1.3.1)
  sjlabelled,
  stats,
  summarytools,
  texreg,
  tidyverse,
  tidyselect,
  tidyr,       # Database operations (0.8.3)
  treeClust,   # Predicting leaf position for causal trees (1.1-7)
  tibble)      # Modern alternative to data frames (2.1.1)

# Set seed for reproducibility
set.seed(201911) 

# Paths
datapath <- "../../../Data/D-P21-13185 HU Berlin Impfskeptiker_Finaler_Datensatz.sav"

fig_1_path <- "../figures/figure_1.pdf"
fig_2_path <- "../figures/figure_2.pdf"
fig_3_path <- "../figures/figure_3.pdf"
fig_4_path <- "../figures/figure_4.pdf"
google_plot_path <- "../figures/figure_5.pdf"
corr_matrix_plot_path <- "../figures/figure_6.pdf"
correlates_plot_path  <- "../figures/figure_7.pdf"
undecided_cf_path     <- "../figures/figure_8.pdf"
blps_plot_path <- "../figures/figure_9.pdf"
lm_plot_path <- "../figures/figure_10.pdf"

tab_1_path <- "../figures/table_1.tex"
tab_2_path <- "../figures/table_2.tex"
tab_3_path <- "../figures/table_3.tex"



# variable names and labels
var_list <- read.csv("input/vars.csv") %>% arrange(order)

covariate_names <- var_list$new_name[var_list$covariate==1]
  
# Labels for treatments
treatments <- treatment_levels <- c("financialA","financialB", "negative", "transaction")
treatment_levels_diff <- c("financialA_diff","financialB_diff", "negative_diff", "transaction_diff")
treatment_labels <- c("Financial 25", "Financial 50", "Freedoms", "Local Doctors")

statuses <- c("Acceptant", "Hesitant", "Undecided")


# Training fraction
train_fraction <- 1  # for causal forests: currently all data used

```


```{r, child = "1_prep_data.Rmd"}
```


```{r, child = "2_main_results.Rmd"}
```



```{r, child = "3_het_effects.Rmd"}
```

# References

<div id="refs"></div>

